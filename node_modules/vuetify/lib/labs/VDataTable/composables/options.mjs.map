{"version":3,"file":"options.mjs","names":["computed","watch","deepEqual","getCurrentInstance","useOptions","page","itemsPerPage","sortBy","startIndex","stopIndex","pageCount","vm","options","value","deep","oldOptions","emit","immediate"],"sources":["../../../../src/labs/VDataTable/composables/options.ts"],"sourcesContent":["// Utilities\nimport { computed, watch } from 'vue'\nimport { deepEqual, getCurrentInstance } from '@/util'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { SortItem } from './sort'\n\nexport function useOptions ({\n  page,\n  itemsPerPage,\n  sortBy,\n  startIndex,\n  stopIndex,\n  pageCount,\n}: {\n  page: Ref<number>\n  itemsPerPage: Ref<number>\n  sortBy: Ref<readonly SortItem[]>\n  startIndex: Ref<number>\n  stopIndex: Ref<number>\n  pageCount: Ref<number>\n}) {\n  const vm = getCurrentInstance('VDataTable')\n\n  const options = computed(() => ({\n    page: page.value,\n    itemsPerPage: itemsPerPage.value,\n    startIndex: startIndex.value,\n    stopIndex: stopIndex.value,\n    pageCount: pageCount.value,\n    sortBy: sortBy.value,\n  }))\n\n  // Reset page when sorting changes\n  watch(sortBy, () => {\n    page.value = 1\n  }, { deep: true })\n\n  // Reset page when items-per-page changes\n  watch(itemsPerPage, () => {\n    page.value = 1\n  })\n\n  let oldOptions: unknown = null\n  watch(options, () => {\n    if (deepEqual(oldOptions, options.value)) return\n    vm.emit('update:options', options.value)\n    oldOptions = options.value\n  }, { deep: true, immediate: true })\n}\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,EAAEC,KAAK,QAAQ,KAAK;AAAA,SAC5BC,SAAS,EAAEC,kBAAkB,mCAEtC;AAIA,OAAO,SAASC,UAAU,OAcvB;EAAA,IAdyB;IAC1BC,IAAI;IACJC,YAAY;IACZC,MAAM;IACNC,UAAU;IACVC,SAAS;IACTC;EAQF,CAAC;EACC,MAAMC,EAAE,GAAGR,kBAAkB,CAAC,YAAY,CAAC;EAE3C,MAAMS,OAAO,GAAGZ,QAAQ,CAAC,OAAO;IAC9BK,IAAI,EAAEA,IAAI,CAACQ,KAAK;IAChBP,YAAY,EAAEA,YAAY,CAACO,KAAK;IAChCL,UAAU,EAAEA,UAAU,CAACK,KAAK;IAC5BJ,SAAS,EAAEA,SAAS,CAACI,KAAK;IAC1BH,SAAS,EAAEA,SAAS,CAACG,KAAK;IAC1BN,MAAM,EAAEA,MAAM,CAACM;EACjB,CAAC,CAAC,CAAC;;EAEH;EACAZ,KAAK,CAACM,MAAM,EAAE,MAAM;IAClBF,IAAI,CAACQ,KAAK,GAAG,CAAC;EAChB,CAAC,EAAE;IAAEC,IAAI,EAAE;EAAK,CAAC,CAAC;;EAElB;EACAb,KAAK,CAACK,YAAY,EAAE,MAAM;IACxBD,IAAI,CAACQ,KAAK,GAAG,CAAC;EAChB,CAAC,CAAC;EAEF,IAAIE,UAAmB,GAAG,IAAI;EAC9Bd,KAAK,CAACW,OAAO,EAAE,MAAM;IACnB,IAAIV,SAAS,CAACa,UAAU,EAAEH,OAAO,CAACC,KAAK,CAAC,EAAE;IAC1CF,EAAE,CAACK,IAAI,CAAC,gBAAgB,EAAEJ,OAAO,CAACC,KAAK,CAAC;IACxCE,UAAU,GAAGH,OAAO,CAACC,KAAK;EAC5B,CAAC,EAAE;IAAEC,IAAI,EAAE,IAAI;IAAEG,SAAS,EAAE;EAAK,CAAC,CAAC;AACrC"}