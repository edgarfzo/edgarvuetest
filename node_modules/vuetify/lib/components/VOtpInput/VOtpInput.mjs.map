{"version":3,"file":"VOtpInput.mjs","names":["VInput","VTextField","ripple","convertToUnit","keyCodes","breaking","mixins","baseMixins","extend","name","directives","inheritAttrs","props","length","type","Number","String","default","plain","Boolean","data","badInput","initialValue","isBooted","otp","computed","outlined","classes","options","call","isDirty","watch","isFocused","value","val","lazyValue","created","$attrs","hasOwnProperty","internalValue","split","mounted","requestAnimationFrame","methods","focus","e","otpIdx","onFocus","genInputSlot","$createElement","setBackgroundColor","backgroundColor","staticClass","style","height","on","click","onClick","mousedown","onMouseDown","mouseup","onMouseUp","genDefaultSlot","genControl","genFieldset","genTextFieldSlot","genContent","Array","from","_","i","setTextColor","validationState","class","attrs","genLegend","span","domProps","innerHTML","width","genInput","listeners","Object","assign","listeners$","change","min","attrs$","disabled","isDisabled","readonly","isReadonly","id","computedId","maxlength","blur","onBlur","input","onInput","paste","onPaste","keydown","onKeyDown","keyup","onKeyUp","ref","refInFor","$nextTick","$emit","$refs","undefined","preventDefault","stopPropagation","elements","document","activeElement","select","target","applyValue","join","validity","nextIndex","changeFocus","clearFocus","onCompleted","index","keyCode","enter","hasMouseDown","event","maxCursor","inputVal","clipboardData","getData","inputDataArray","newOtp","appIdx","toString","targetFocus","Math","next","updateValue","hasColor","eventKey","key","includes","rsp","render","h","themeClasses"],"sources":["../../../src/components/VOtpInput/VOtpInput.ts"],"sourcesContent":["// @ts-nocheck\n/* eslint-disable */\n\n// Styles\nimport '../VTextField/VTextField.sass'\nimport './VOtpInput.sass'\n\n// Extensions\nimport VInput from '../VInput'\nimport VTextField from '../VTextField/VTextField'\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Utilities\nimport { convertToUnit, keyCodes } from '../../util/helpers'\nimport { breaking } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\n\nconst baseMixins = mixins(\n  VInput,\n)\n\ninterface options extends InstanceType<typeof baseMixins> {\n  $refs: {\n    input: HTMLInputElement[]\n  }\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-otp-input',\n\n  directives: {\n    ripple,\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    length: {\n      type: [Number, String],\n      default: 6,\n    },\n    type: {\n      type: String,\n      default: 'text',\n    },\n    plain: Boolean,\n  },\n\n  data: () => ({\n    badInput: false,\n    initialValue: null,\n    isBooted: false,\n    otp: [] as string[],\n  }),\n\n  computed: {\n    outlined (): Boolean {\n      return !this.plain\n    },\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        ...VTextField.options.computed.classes.call(this),\n        'v-otp-input--plain': this.plain,\n      }\n    },\n    isDirty (): boolean {\n      return VInput.options.computed.isDirty.call(this) || this.badInput\n    },\n  },\n\n  watch: {\n    isFocused: 'updateValue',\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      breaking('browser-autocomplete', 'autocomplete', this)\n    }\n\n    this.otp = this.internalValue?.split('') || []\n  },\n\n  mounted () {\n    requestAnimationFrame(() => (this.isBooted = true))\n  },\n\n  methods: {\n    /** @public */\n    focus (e: Event, otpIdx: number) {\n      this.onFocus(e, otpIdx || 0)\n    },\n    genInputSlot (otpIdx: number) {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: { height: convertToUnit(this.height) },\n        on: {\n          click: () => this.onClick(otpIdx),\n          mousedown: (e: Event) => this.onMouseDown(e, otpIdx),\n          mouseup: (e: Event) => this.onMouseUp(e, otpIdx),\n        },\n      }), [this.genDefaultSlot(otpIdx)])\n    },\n    genControl (otpIdx: number) {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control',\n      }, [\n        this.genInputSlot(otpIdx),\n      ])\n    },\n    genDefaultSlot (otpIdx: number) {\n      return [\n        this.genFieldset(),\n        this.genTextFieldSlot(otpIdx),\n      ]\n    },\n    genContent () {\n      return Array.from({ length: +this.length }, (_, i) => {\n        return this.$createElement('div', this.setTextColor(this.validationState, {\n          staticClass: 'v-input',\n          class: this.classes,\n        }), [this.genControl(i)])\n      })\n    },\n    genFieldset () {\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true,\n        },\n      }, [this.genLegend()])\n    },\n    genLegend () {\n      const span = this.$createElement('span', {\n        domProps: { innerHTML: '&#8203;' },\n      })\n\n      return this.$createElement('legend', {\n        style: {\n          width: '0px',\n        },\n      }, [span])\n    },\n    genInput (otpIdx: number) {\n      const listeners = Object.assign({}, this.listeners$)\n      delete listeners.change // Change should not be bound externally\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: this.otp[otpIdx],\n          min: this.type === 'number' ? 0 : null,\n        },\n        attrs: {\n          ...this.attrs$,\n          disabled: this.isDisabled,\n          readonly: this.isReadonly,\n          type: this.type,\n          id: `${this.computedId}--${otpIdx}`,\n          class: `otp-field-box--${otpIdx}`,\n          maxlength: 1,\n        },\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: (e: Event) => this.onInput(e, otpIdx),\n          focus: (e: Event) => this.onFocus(e, otpIdx),\n          paste: (e: ClipboardEvent) => this.onPaste(e, otpIdx),\n          keydown: this.onKeyDown,\n          keyup: (e: KeyboardEvent) => this.onKeyUp(e, otpIdx),\n        }),\n        ref: 'input',\n        refInFor: true,\n      })\n    },\n    genTextFieldSlot (otpIdx: number): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot',\n      }, [\n        this.genInput(otpIdx),\n      ])\n    },\n    onBlur (e?: Event) {\n      this.isFocused = false\n      e && this.$nextTick(() => this.$emit('blur', e))\n    },\n    onClick (otpIdx: number) {\n      if (this.isFocused || this.isDisabled || !this.$refs.input[otpIdx]) return\n\n      this.onFocus(undefined, otpIdx)\n    },\n    onFocus (e?: Event, otpIdx?: number) {\n      e?.preventDefault()\n      e?.stopPropagation()\n      const elements = this.$refs.input as HTMLInputElement[]\n      const ref = this.$refs.input && elements[otpIdx || 0]\n      if (!ref) return\n\n      if (document.activeElement !== ref) {\n        ref.focus()\n        return ref.select()\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true\n        ref.select()\n        e && this.$emit('focus', e)\n      }\n    },\n    onInput (e: Event, otpIdx: number) {\n      const target = e.target as HTMLInputElement\n      const value = target.value\n      this.applyValue(otpIdx, target.value, () => {\n        this.internalValue = this.otp.join('')\n      })\n      this.badInput = target.validity && target.validity.badInput\n\n      const nextIndex = otpIdx + 1\n      if (value) {\n        if (nextIndex < +this.length) {\n          this.changeFocus(nextIndex)\n        } else {\n          this.clearFocus(otpIdx)\n          this.onCompleted()\n        }\n      }\n    },\n    clearFocus (index: number) {\n      const input = this.$refs.input[index] as HTMLInputElement\n      input.blur()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (e.keyCode === keyCodes.enter) {\n        this.$emit('change', this.internalValue)\n      }\n\n      this.$emit('keydown', e)\n    },\n    onMouseDown (e: Event, otpIdx: number) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input[otpIdx]) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      VInput.options.methods.onMouseDown.call(this, e)\n    },\n    onMouseUp (e: Event, otpIdx: number) {\n      if (this.hasMouseDown) this.focus(e, otpIdx)\n\n      VInput.options.methods.onMouseUp.call(this, e)\n    },\n    onPaste (event: ClipboardEvent, index: number) {\n      const maxCursor = +this.length - 1\n      const inputVal = event?.clipboardData?.getData('Text')\n      const inputDataArray = inputVal?.split('') || []\n      event.preventDefault()\n      const newOtp: string[] = [...this.otp]\n      for (let i = 0; i < inputDataArray.length; i++) {\n        const appIdx = index + i\n        if (appIdx > maxCursor) break\n        newOtp[appIdx] = inputDataArray[i].toString()\n      }\n      this.otp = newOtp\n      const targetFocus = Math.min(index + inputDataArray.length, maxCursor)\n      this.changeFocus(targetFocus)\n\n      if (newOtp.length === +this.length) { this.onCompleted(); this.clearFocus(targetFocus) }\n    },\n    applyValue (index: number, inputVal: string, next: Function) {\n      const newOtp: string[] = [...this.otp]\n      newOtp[index] = inputVal\n      this.otp = newOtp\n      next()\n    },\n    changeFocus (index: number) {\n      this.onFocus(undefined, index || 0)\n    },\n    updateValue (val: boolean) {\n      // Sets validationState from validatable\n      this.hasColor = val\n\n      if (val) {\n        this.initialValue = this.lazyValue\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue)\n      }\n    },\n    onKeyUp (event: KeyboardEvent, index: number) {\n      event.preventDefault()\n      const eventKey = event.key\n      if (['Tab', 'Shift', 'Meta', 'Control', 'Alt'].includes(eventKey)) {\n        return\n      }\n      if (['Delete'].includes(eventKey)) {\n        return\n      }\n      if (eventKey === 'ArrowLeft' || (eventKey === 'Backspace' && !this.otp[index])) {\n        return index > 0 && this.changeFocus(index - 1)\n      }\n      if (eventKey === 'ArrowRight') {\n        return index + 1 < +this.length && this.changeFocus(index + 1)\n      }\n    },\n    onCompleted () {\n      const rsp = this.otp.join('')\n      if (rsp.length === +this.length) {\n        this.$emit('finish', rsp)\n      }\n    },\n  },\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-otp-input',\n      class: this.themeClasses,\n    }, this.genContent())\n  },\n})\n"],"mappings":"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"}